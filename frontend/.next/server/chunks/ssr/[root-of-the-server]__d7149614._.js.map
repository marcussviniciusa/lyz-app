{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/m/lyz-app/frontend/src/components/AIAnalysisAnimation.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\ntype AIAnalysisAnimationProps = {\n  isAnalyzing: boolean;\n  progress: number;\n  message?: string;\n};\n\nconst AIAnalysisAnimation: React.FC<AIAnalysisAnimationProps> = ({ \n  isAnalyzing, \n  progress, \n  message = 'Processando análise de exames com IA...'\n}) => {\n  // Palavras para animação de texto\n  const words = [\n    'Extraindo dados...',\n    'Analisando padrões...',\n    'Correlacionando resultados...',\n    'Verificando indicadores...',\n    'Comparando com base de conhecimento...',\n    'Verificando valores de referência...',\n    'Gerando insights...',\n    'Preparando resumo...'\n  ];\n\n  const [currentWordIndex, setCurrentWordIndex] = useState(0);\n\n  // Atualiza a palavra a cada 2.5 segundos\n  React.useEffect(() => {\n    if (!isAnalyzing) return;\n    \n    const interval = setInterval(() => {\n      setCurrentWordIndex(prevIndex => \n        prevIndex === words.length - 1 ? 0 : prevIndex + 1\n      );\n    }, 2500);\n    \n    return () => clearInterval(interval);\n  }, [isAnalyzing, words.length]);\n\n  if (!isAnalyzing) return null;\n\n  return (\n    <motion.div \n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      exit={{ opacity: 0, y: -20 }}\n      className=\"fixed inset-0 bg-slate-900/70 backdrop-blur-sm flex items-center justify-center z-50\"\n    >\n      <div className=\"bg-white rounded-xl shadow-2xl p-8 w-full max-w-lg relative overflow-hidden\">\n        {/* Gradiente decorativo no topo */}\n        <div className=\"absolute top-0 left-0 right-0 h-2 bg-gradient-to-r from-emerald-400 via-blue-500 to-purple-500\"></div>\n        \n        <div className=\"mb-6 text-center\">\n          <h3 className=\"text-xl font-semibold text-gray-800 mb-2\">{message}</h3>\n          <p className=\"text-gray-500 text-sm\">Isso pode levar alguns instantes</p>\n        </div>\n        \n        {/* Círculo animado */}\n        <div className=\"flex justify-center mb-8\">\n          <div className=\"relative w-32 h-32\">\n            {/* Círculo de fundo */}\n            <div className=\"absolute inset-0 rounded-full border-4 border-gray-100\"></div>\n            \n            {/* Círculo de progresso */}\n            <svg className=\"absolute inset-0 w-full h-full\" viewBox=\"0 0 100 100\">\n              <motion.circle\n                initial={{ pathLength: 0 }}\n                animate={{ pathLength: progress / 100 }}\n                transition={{ duration: 0.5, ease: \"easeInOut\" }}\n                cx=\"50\"\n                cy=\"50\"\n                r=\"48\"\n                fill=\"transparent\"\n                stroke=\"url(#gradient)\"\n                strokeWidth=\"4\"\n                strokeLinecap=\"round\"\n                style={{\n                  rotate: \"-90deg\",\n                  transformOrigin: \"center\",\n                }}\n              />\n              <defs>\n                <linearGradient id=\"gradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n                  <stop offset=\"0%\" stopColor=\"#10b981\" />\n                  <stop offset=\"100%\" stopColor=\"#3b82f6\" />\n                </linearGradient>\n              </defs>\n            </svg>\n            \n            {/* Percentual no centro */}\n            <div className=\"absolute inset-0 flex items-center justify-center\">\n              <span className=\"text-2xl font-bold text-emerald-600\">{Math.round(progress)}%</span>\n            </div>\n          </div>\n        </div>\n        \n        {/* Animação de texto */}\n        <div className=\"text-center h-8 mb-6 overflow-hidden\">\n          <AnimatePresence mode=\"wait\">\n            <motion.p\n              key={currentWordIndex}\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -20 }}\n              transition={{ duration: 0.5 }}\n              className=\"text-emerald-600 font-medium\"\n            >\n              {words[currentWordIndex]}\n            </motion.p>\n          </AnimatePresence>\n        </div>\n        \n        {/* Partículas pulsantes */}\n        <div className=\"relative h-2 w-full bg-gray-100 rounded-full overflow-hidden mb-2\">\n          <motion.div\n            className=\"absolute top-0 left-0 h-full bg-gradient-to-r from-emerald-500 to-blue-500\"\n            style={{ width: `${progress}%` }}\n            initial={{ width: 0 }}\n            animate={{ width: `${progress}%` }}\n            transition={{ duration: 0.5 }}\n          />\n        </div>\n        \n        <div className=\"text-center text-xs text-gray-400\">\n          Os resultados serão processados com precisão\n        </div>\n      </div>\n    </motion.div>\n  );\n};\n\nexport default AIAnalysisAnimation;\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;;;;AAQA,MAAM,sBAA0D,CAAC,EAC/D,WAAW,EACX,QAAQ,EACR,UAAU,yCAAyC,EACpD;IACC,kCAAkC;IAClC,MAAM,QAAQ;QACZ;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IAED,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEzD,yCAAyC;IACzC,qMAAA,CAAA,UAAK,CAAC,SAAS,CAAC;QACd,IAAI,CAAC,aAAa;QAElB,MAAM,WAAW,YAAY;YAC3B,oBAAoB,CAAA,YAClB,cAAc,MAAM,MAAM,GAAG,IAAI,IAAI,YAAY;QAErD,GAAG;QAEH,OAAO,IAAM,cAAc;IAC7B,GAAG;QAAC;QAAa,MAAM,MAAM;KAAC;IAE9B,IAAI,CAAC,aAAa,OAAO;IAEzB,qBACE,8OAAC,0LAAA,CAAA,SAAM,CAAC,GAAG;QACT,SAAS;YAAE,SAAS;YAAG,GAAG;QAAG;QAC7B,SAAS;YAAE,SAAS;YAAG,GAAG;QAAE;QAC5B,MAAM;YAAE,SAAS;YAAG,GAAG,CAAC;QAAG;QAC3B,WAAU;kBAEV,cAAA,8OAAC;YAAI,WAAU;;8BAEb,8OAAC;oBAAI,WAAU;;;;;;8BAEf,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAG,WAAU;sCAA4C;;;;;;sCAC1D,8OAAC;4BAAE,WAAU;sCAAwB;;;;;;;;;;;;8BAIvC,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAI,WAAU;;0CAEb,8OAAC;gCAAI,WAAU;;;;;;0CAGf,8OAAC;gCAAI,WAAU;gCAAiC,SAAQ;;kDACtD,8OAAC,0LAAA,CAAA,SAAM,CAAC,MAAM;wCACZ,SAAS;4CAAE,YAAY;wCAAE;wCACzB,SAAS;4CAAE,YAAY,WAAW;wCAAI;wCACtC,YAAY;4CAAE,UAAU;4CAAK,MAAM;wCAAY;wCAC/C,IAAG;wCACH,IAAG;wCACH,GAAE;wCACF,MAAK;wCACL,QAAO;wCACP,aAAY;wCACZ,eAAc;wCACd,OAAO;4CACL,QAAQ;4CACR,iBAAiB;wCACnB;;;;;;kDAEF,8OAAC;kDACC,cAAA,8OAAC;4CAAe,IAAG;4CAAW,IAAG;4CAAK,IAAG;4CAAK,IAAG;4CAAO,IAAG;;8DACzD,8OAAC;oDAAK,QAAO;oDAAK,WAAU;;;;;;8DAC5B,8OAAC;oDAAK,QAAO;oDAAO,WAAU;;;;;;;;;;;;;;;;;;;;;;;0CAMpC,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCAAK,WAAU;;wCAAuC,KAAK,KAAK,CAAC;wCAAU;;;;;;;;;;;;;;;;;;;;;;;8BAMlF,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC,yLAAA,CAAA,kBAAe;wBAAC,MAAK;kCACpB,cAAA,8OAAC,0LAAA,CAAA,SAAM,CAAC,CAAC;4BAEP,SAAS;gCAAE,SAAS;gCAAG,GAAG;4BAAG;4BAC7B,SAAS;gCAAE,SAAS;gCAAG,GAAG;4BAAE;4BAC5B,MAAM;gCAAE,SAAS;gCAAG,GAAG,CAAC;4BAAG;4BAC3B,YAAY;gCAAE,UAAU;4BAAI;4BAC5B,WAAU;sCAET,KAAK,CAAC,iBAAiB;2BAPnB;;;;;;;;;;;;;;;8BAaX,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC,0LAAA,CAAA,SAAM,CAAC,GAAG;wBACT,WAAU;wBACV,OAAO;4BAAE,OAAO,GAAG,SAAS,CAAC,CAAC;wBAAC;wBAC/B,SAAS;4BAAE,OAAO;wBAAE;wBACpB,SAAS;4BAAE,OAAO,GAAG,SAAS,CAAC,CAAC;wBAAC;wBACjC,YAAY;4BAAE,UAAU;wBAAI;;;;;;;;;;;8BAIhC,8OAAC;oBAAI,WAAU;8BAAoC;;;;;;;;;;;;;;;;;AAM3D;uCAEe","debugId":null}},
    {"offset": {"line": 294, "column": 0}, "map": {"version":3,"sources":["file:///home/m/lyz-app/frontend/src/components/AIAnalysisResult.tsx"],"sourcesContent":["import React from 'react';\nimport { motion } from 'framer-motion';\nimport type { AIAnalysisResult } from '@/services/aiAnalysisService';\nimport { Check, AlertTriangle, Brain, Sparkles } from 'lucide-react';\n\ninterface AIAnalysisResultProps {\n  result: AIAnalysisResult;\n}\n\nconst AIAnalysisResult: React.FC<AIAnalysisResultProps> = ({ result }) => {\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: 0.5 }}\n      className=\"bg-white rounded-lg shadow-lg p-6 mt-4 border border-emerald-100\"\n    >\n      <div className=\"flex items-center mb-4\">\n        <div className=\"bg-emerald-100 p-2 rounded-full mr-3\">\n          <Brain className=\"text-emerald-600 h-5 w-5\" />\n        </div>\n        <h3 className=\"text-lg font-semibold text-gray-800\">Análise por IA</h3>\n        <div className=\"ml-auto bg-emerald-100 px-3 py-1 rounded-full flex items-center\">\n          <Sparkles className=\"text-emerald-600 h-4 w-4 mr-1\" />\n          <span className=\"text-xs font-medium text-emerald-700\">Assistência IA</span>\n        </div>\n      </div>\n      \n      {/* Resumo */}\n      <div className=\"mb-5\">\n        <h4 className=\"text-sm font-medium text-gray-700 mb-1\">Resumo</h4>\n        <p className=\"text-gray-600\">{result.summary}</p>\n      </div>\n      \n      {/* Achados principais */}\n      <div className=\"mb-5\">\n        <h4 className=\"text-sm font-medium text-gray-700 mb-2\">Achados Principais</h4>\n        <ul className=\"space-y-2\">\n          {(Array.isArray(result.keyFindings) ? result.keyFindings : \n            result.keyFindings ? [result.keyFindings] : [\"Nenhum achado disponível\"])\n            .map((finding, index) => (\n              <motion.li \n                key={index}\n                initial={{ opacity: 0, x: -10 }}\n                animate={{ opacity: 1, x: 0 }}\n                transition={{ delay: 0.1 * index, duration: 0.4 }}\n                className=\"flex items-start\"\n              >\n                <Check className=\"text-emerald-500 h-5 w-5 flex-shrink-0 mr-2 mt-0.5\" />\n                <span className=\"text-gray-600\">{finding}</span>\n              </motion.li>\n            ))\n          }\n        </ul>\n      </div>\n      \n      {/* Recomendações */}\n      <div className=\"mb-5\">\n        <h4 className=\"text-sm font-medium text-gray-700 mb-2\">Recomendações</h4>\n        <ul className=\"space-y-2\">\n          {(Array.isArray(result.recommendations) ? result.recommendations : \n            // Se não for array, converter para array\n            result.recommendations ? [result.recommendations] : [\"Nenhuma recomendação disponível\"])\n            .map((recommendation, index) => (\n              <motion.li \n                key={index}\n                initial={{ opacity: 0, x: -10 }}\n                animate={{ opacity: 1, x: 0 }}\n                transition={{ delay: 0.1 * index + 0.3, duration: 0.4 }}\n                className=\"flex items-start\"\n              >\n                <div className=\"bg-blue-100 p-1 rounded-full mr-2 mt-0.5\">\n                  <Check className=\"text-blue-600 h-3 w-3\" />\n                </div>\n                <span className=\"text-gray-600\">{recommendation}</span>\n              </motion.li>\n            ))\n          }\n        </ul>\n      </div>\n      \n      {/* Fatores de risco */}\n      {result.riskFactors && (\n        Array.isArray(result.riskFactors) ? result.riskFactors.length > 0 : result.riskFactors\n      ) && (\n        <div>\n          <h4 className=\"text-sm font-medium text-gray-700 mb-2\">Fatores de Risco</h4>\n          <ul className=\"space-y-2\">\n            {(Array.isArray(result.riskFactors) ? result.riskFactors : \n              result.riskFactors ? [result.riskFactors] : [])\n              .map((risk, index) => (\n                <motion.li \n                  key={index}\n                  initial={{ opacity: 0, x: -10 }}\n                  animate={{ opacity: 1, x: 0 }}\n                  transition={{ delay: 0.1 * index + 0.6, duration: 0.4 }}\n                  className=\"flex items-start\"\n                >\n                  <div className=\"bg-amber-100 p-1 rounded-full mr-2 mt-0.5\">\n                    <AlertTriangle className=\"text-amber-600 h-3 w-3\" />\n                  </div>\n                  <span className=\"text-gray-600\">{risk}</span>\n                </motion.li>\n              ))\n            }\n          </ul>\n        </div>\n      )}\n      \n      <div className=\"mt-6 pt-4 border-t border-gray-100 text-xs text-gray-400 text-center\">\n        Esta análise foi gerada por IA e deve ser revisada por um profissional de saúde.\n      </div>\n    </motion.div>\n  );\n};\n\nexport default AIAnalysisResult;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 659, "column": 0}, "map": {"version":3,"sources":["file:///home/m/lyz-app/frontend/src/services/aiAnalysisService.ts"],"sourcesContent":["import axios from 'axios';\nimport { OpenAI } from 'openai';\n\n// Inicializar OpenAI client\nconst openai = new OpenAI({\n  apiKey: process.env.NEXT_PUBLIC_OPENAI_API_KEY || '',\n  dangerouslyAllowBrowser: true\n});\n\n// Interface para o tipo de dados de análise\nexport interface ExamAnalysisData {\n  findings?: string;\n  recommendations?: string;\n  fileNames?: string[];\n  fileContents?: {[filename: string]: string};\n  patientInfo?: {\n    fullName?: string;\n    age?: number | string;\n    gender?: string;\n  };\n}\n\n// Interface para o resultado da análise\nexport interface AIAnalysisResult {\n  summary: string;\n  keyFindings: string[];\n  recommendations: string[];\n  riskFactors?: string[];\n}\n\n/**\n * Gera um resumo dos resultados de exames usando IA\n */\nconst generateExamAnalysis = async (\n  data: ExamAnalysisData, \n  updateProgress: (progress: number) => void\n): Promise<AIAnalysisResult> => {\n  try {\n    // Simular progresso inicial\n    updateProgress(10);\n    \n    // Construir o prompt para a IA\n    let prompt = \"Faça uma análise médica profissional com base nas seguintes informações:\\n\\n\";\n    \n    if (data.patientInfo) {\n      prompt += `Paciente: ${data.patientInfo.fullName || 'Não informado'}\\n`;\n      prompt += `Idade: ${data.patientInfo.age || 'Não informada'}\\n`;\n      prompt += `Gênero: ${data.patientInfo.gender || 'Não informado'}\\n\\n`;\n    }\n    \n    // Adicionar informações dos achados\n    if (data.findings) {\n      prompt += `Achados nos exames: ${data.findings}\\n\\n`;\n    }\n    \n    // Adicionar informações das recomendações (se disponíveis)\n    if (data.recommendations) {\n      prompt += `Recomendações prévias: ${data.recommendations}\\n\\n`;\n    }\n    \n    // Incluir o conteúdo dos arquivos de exames (se disponível)\n    if (data.fileContents && Object.keys(data.fileContents).length > 0) {\n      prompt += `CONTEÚDO DOS EXAMES ANEXADOS:\\n\\n`;\n      \n      // Adicionar o conteúdo de cada arquivo\n      for (const [filename, content] of Object.entries(data.fileContents)) {\n        if (content && content.trim().length > 0) {\n          prompt += `=== EXAME: ${filename} ===\\n${content}\\n\\n`;\n        }\n      }\n    }\n    // Caso só tenhamos os nomes dos arquivos, sem conteúdo\n    else if (data.fileNames && data.fileNames.length > 0) {\n      prompt += `Arquivos de exames anexados (sem conteúdo disponível): ${data.fileNames.join(', ')}\\n\\n`;\n      prompt += `IMPORTANTE: Os conteúdos dos arquivos não puderam ser extraídos. A análise será limitada às informações disponíveis.\\n\\n`;\n    }\n\n    prompt += `Por favor, forneça uma análise completa incluindo:\n1. Um breve resumo dos achados principais\n2. Lista de pontos-chave identificados\n3. Recomendações específicas baseadas nos resultados\n4. Possíveis fatores de risco identificados (se houver)\n\nForneça a resposta em formato JSON com as chaves: \"summary\", \"keyFindings\", \"recommendations\" e \"riskFactors\".`;\n\n    updateProgress(30);\n    \n    // Simular um atraso para a análise\n    await new Promise(resolve => setTimeout(resolve, 1500));\n    updateProgress(50);\n    \n    // Chamada para a API da OpenAI\n    const completion = await openai.chat.completions.create({\n      messages: [{ role: 'user', content: prompt }],\n      model: 'gpt-3.5-turbo',\n      response_format: { type: 'json_object' }\n    });\n    \n    updateProgress(80);\n    \n    // Extrair o resultado\n    const responseContent = completion.choices[0]?.message?.content || '{}';\n    const result = JSON.parse(responseContent) as AIAnalysisResult;\n    \n    updateProgress(100);\n    \n    return result;\n  } catch (error) {\n    console.error('Erro ao gerar análise do exame:', error);\n    \n    // Retornar um resultado padrão em caso de erro\n    return {\n      summary: 'Não foi possível gerar um resumo devido a um erro na análise.',\n      keyFindings: ['Erro na análise de IA'],\n      recommendations: ['Consulte um profissional de saúde para uma análise detalhada.']\n    };\n  }\n};\n\n/**\n * Versão mock para desenvolvimento/testes sem consumir a API da OpenAI\n */\nconst generateExamAnalysisMock = async (\n  data: ExamAnalysisData,\n  updateProgress: (progress: number) => void\n): Promise<AIAnalysisResult> => {\n  // Simular progresso e atrasos\n  updateProgress(10);\n  await new Promise(resolve => setTimeout(resolve, 1000));\n  updateProgress(25);\n  await new Promise(resolve => setTimeout(resolve, 1000));\n  updateProgress(45);\n  await new Promise(resolve => setTimeout(resolve, 1000));\n  updateProgress(70);\n  await new Promise(resolve => setTimeout(resolve, 1000));\n  updateProgress(90);\n  await new Promise(resolve => setTimeout(resolve, 500));\n  updateProgress(100);\n  \n  // Retornar um resultado fictício\n  return {\n    summary: `Análise dos exames do paciente ${data.patientInfo?.fullName || 'não identificado'} demonstra alguns achados que merecem atenção. ${data.findings ? 'Os principais achados incluem ' + data.findings.substring(0, 100) + '...' : 'Não foram fornecidos detalhes específicos sobre os achados.'}`,\n    keyFindings: [\n      'Níveis ligeiramente elevados nos marcadores inflamatórios',\n      'Resultados dentro da normalidade para função hepática e renal',\n      'Hemograma completo sem alterações significativas'\n    ],\n    recommendations: [\n      'Manter acompanhamento médico regular',\n      'Avaliar alimentação e estilo de vida',\n      'Considerar exames complementares específicos para melhor diagnóstico'\n    ],\n    riskFactors: [\n      'Histórico familiar de condições semelhantes',\n      'Estilo de vida sedentário'\n    ]\n  };\n};\n\n// Verificar se temos uma chave de API válida e não vazia\nconst hasValidApiKey = process.env.NEXT_PUBLIC_OPENAI_API_KEY && \n  process.env.NEXT_PUBLIC_OPENAI_API_KEY.length > 10;\n\n// Para evitar erros com API key inválida, use a versão mock em ambientes de desenvolvimento\n// ou quando não houver chave configurada corretamente\nexport default hasValidApiKey && process.env.NODE_ENV === 'production'\n  ? generateExamAnalysis \n  : generateExamAnalysisMock;\n\n// Exportamos ambas as versões para permitir acesso direto quando necessário\nexport { generateExamAnalysis, generateExamAnalysisMock };\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 793, "column": 0}, "map": {"version":3,"sources":["file:///home/m/lyz-app/frontend/src/components/AdvancedFilePreview.tsx"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\nimport { Document, Page, pdfjs } from 'react-pdf';\nimport { ZoomIn, ZoomOut, RotateCw, ChevronLeft, ChevronRight, Download, Maximize, Minimize, FileIcon } from 'lucide-react';\nimport 'react-pdf/dist/Page/AnnotationLayer.css';\nimport 'react-pdf/dist/Page/TextLayer.css';\n\n// Configurar o worker do PDF.js\npdfjs.GlobalWorkerOptions.workerSrc = `https://unpkg.com/pdfjs-dist@${pdfjs.version}/build/pdf.worker.min.js`;\n\ntype AdvancedFilePreviewProps = {\n  file: File | string;\n  filename?: string;\n  onClose?: () => void;\n};\n\nconst AdvancedFilePreview: React.FC<AdvancedFilePreviewProps> = ({ file, filename, onClose }) => {\n  const [numPages, setNumPages] = useState<number | null>(null);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [scale, setScale] = useState(1);\n  const [rotation, setRotation] = useState(0);\n  const [isFullscreen, setIsFullscreen] = useState(false);\n  const [fileUrl, setFileUrl] = useState<string>('');\n  const [fileType, setFileType] = useState<string>('');\n\n  useEffect(() => {\n    if (file instanceof File) {\n      setFileUrl(URL.createObjectURL(file));\n      setFileType(file.type);\n    } else if (typeof file === 'string') {\n      setFileUrl(file);\n      // Tentar inferir o tipo do arquivo pela extensão\n      if (file.toLowerCase().endsWith('.pdf')) {\n        setFileType('application/pdf');\n      } else if (file.toLowerCase().match(/\\.(jpg|jpeg|png|gif|bmp|webp)$/)) {\n        setFileType('image/*');\n      } else {\n        setFileType('');\n      }\n    }\n\n    return () => {\n      if (file instanceof File) {\n        URL.revokeObjectURL(fileUrl);\n      }\n    };\n  }, [file]);\n\n  const onDocumentLoadSuccess = ({ numPages }: { numPages: number }) => {\n    setNumPages(numPages);\n    setPageNumber(1);\n  };\n\n  const changePage = (offset: number) => {\n    setPageNumber(prevPageNumber => Math.max(1, Math.min(numPages || 1, prevPageNumber + offset)));\n  };\n\n  const previousPage = () => changePage(-1);\n  const nextPage = () => changePage(1);\n\n  const zoomIn = () => setScale(prevScale => Math.min(3, prevScale + 0.2));\n  const zoomOut = () => setScale(prevScale => Math.max(0.5, prevScale - 0.2));\n  \n  const rotate = () => setRotation(prevRotation => (prevRotation + 90) % 360);\n\n  const toggleFullscreen = () => {\n    setIsFullscreen(!isFullscreen);\n  };\n\n  const downloadFile = () => {\n    const link = document.createElement('a');\n    link.href = fileUrl;\n    link.download = filename || (file instanceof File ? file.name : 'download');\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  // Memorizar as opções do PDF para evitar re-renders desnecessários\n  const pdfOptions = useMemo(() => ({\n    cMapUrl: 'https://unpkg.com/pdfjs-dist@3.4.120/cmaps/',\n    cMapPacked: true,\n  }), []);\n\n  return (\n    <div className={`bg-white rounded-lg shadow-lg overflow-hidden ${isFullscreen ? 'fixed inset-0 z-50' : ''}`}>\n      <div className=\"bg-gray-100 p-3 flex justify-between items-center border-b\">\n        <h3 className=\"font-medium text-gray-800 truncate max-w-md\">\n          {filename || (file instanceof File ? file.name : 'Visualização de Arquivo')}\n        </h3>\n        <div className=\"flex space-x-2\">\n          {fileType === 'application/pdf' && (\n            <>\n              <button \n                onClick={previousPage} \n                disabled={pageNumber <= 1}\n                className={`p-1 rounded hover:bg-gray-200 ${pageNumber <= 1 ? 'opacity-50 cursor-not-allowed' : ''}`}\n                title=\"Página anterior\"\n              >\n                <ChevronLeft size={18} />\n              </button>\n              <span className=\"text-sm text-gray-600 flex items-center\">\n                {pageNumber} / {numPages || '--'}\n              </span>\n              <button \n                onClick={nextPage} \n                disabled={numPages !== null && pageNumber >= numPages}\n                className={`p-1 rounded hover:bg-gray-200 ${numPages !== null && pageNumber >= numPages ? 'opacity-50 cursor-not-allowed' : ''}`}\n                title=\"Próxima página\"\n              >\n                <ChevronRight size={18} />\n              </button>\n            </>\n          )}\n          <button onClick={zoomOut} className=\"p-1 rounded hover:bg-gray-200\" title=\"Diminuir zoom\">\n            <ZoomOut size={18} />\n          </button>\n          <span className=\"text-sm text-gray-600 flex items-center w-12 justify-center\">\n            {Math.round(scale * 100)}%\n          </span>\n          <button onClick={zoomIn} className=\"p-1 rounded hover:bg-gray-200\" title=\"Aumentar zoom\">\n            <ZoomIn size={18} />\n          </button>\n          <button onClick={rotate} className=\"p-1 rounded hover:bg-gray-200\" title=\"Girar\">\n            <RotateCw size={18} />\n          </button>\n          <button onClick={downloadFile} className=\"p-1 rounded hover:bg-gray-200\" title=\"Download\">\n            <Download size={18} />\n          </button>\n          <button onClick={toggleFullscreen} className=\"p-1 rounded hover:bg-gray-200\" title=\"Tela cheia\">\n            {isFullscreen ? <Minimize size={18} /> : <Maximize size={18} />}\n          </button>\n          {onClose && (\n            <button onClick={onClose} className=\"p-1 rounded hover:bg-gray-200 hover:text-red-500\" title=\"Fechar\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n                <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n                <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n              </svg>\n            </button>\n          )}\n        </div>\n      </div>\n      \n      <div className={`relative overflow-auto bg-gray-50 flex items-center justify-center ${isFullscreen ? 'h-[calc(100vh-60px)]' : 'h-[500px]'}`}>\n        {fileType === 'application/pdf' ? (\n          <Document\n            file={fileUrl}\n            onLoadSuccess={onDocumentLoadSuccess}\n            className=\"flex justify-center\"\n            options={pdfOptions}\n          >\n            <Page\n              pageNumber={pageNumber}\n              scale={scale}\n              rotate={rotation}\n              renderTextLayer={true}\n              renderAnnotationLayer={true}\n              className=\"shadow-md\"\n            />\n          </Document>\n        ) : fileType.startsWith('image/') || fileType === 'image/*' ? (\n          <div \n            style={{ \n              transform: `scale(${scale}) rotate(${rotation}deg)`,\n              transformOrigin: 'center',\n              transition: 'transform 0.2s ease'\n            }}\n            className=\"max-h-full max-w-full p-4\"\n          >\n            <img \n              src={fileUrl} \n              alt={filename || \"Preview\"} \n              className=\"max-h-full max-w-full object-contain\"\n            />\n          </div>\n        ) : (\n          <div className=\"text-center p-10\">\n            <FileIcon size={64} className=\"text-gray-400 mx-auto mb-4\" />\n            <h3 className=\"text-lg font-medium text-gray-700\">Tipo de arquivo não suportado para prévia</h3>\n            <p className=\"text-sm text-gray-500 mt-2\">\n              {filename || (file instanceof File ? file.name : 'Arquivo desconhecido')}\n            </p>\n            <button\n              onClick={downloadFile}\n              className=\"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 inline-flex items-center\"\n            >\n              <Download size={16} className=\"mr-2\" />\n              Baixar arquivo\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default AdvancedFilePreview;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1213, "column": 0}, "map": {"version":3,"sources":["file:///home/m/lyz-app/frontend/src/app/dashboard/plans/%5Bid%5D/exam-analysis/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useRef } from 'react';\nimport { useRouter } from 'next/navigation';\nimport Link from 'next/link';\nimport { ArrowLeft, Save, Upload, X, Image, FileText, Brain, Maximize2, FileIcon } from 'lucide-react';\nimport { planAPI, fileAPI } from '@/lib/api';\nimport AIAnalysisAnimation from '@/components/AIAnalysisAnimation';\nimport AIAnalysisResult from '@/components/AIAnalysisResult';\nimport { generateExamAnalysis } from '@/services/aiAnalysisService';\nimport { motion } from 'framer-motion';\nimport AdvancedFilePreview from '@/components/AdvancedFilePreview';\n\nexport default function ExamAnalysisEditPage() {\n  const router = useRouter();\n  const [planId, setPlanId] = useState<string>('');\n  const [plan, setPlan] = useState<any>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isSaving, setIsSaving] = useState(false);\n  const [error, setError] = useState('');\n  \n  // Dados do formulário\n  const [findings, setFindings] = useState('');\n  const [recommendations, setRecommendations] = useState('');\n  \n  // Estado para controlar a opção selecionada\n  const [analysisType, setAnalysisType] = useState<'text' | 'files'>('text');\n  \n  // Estado para arquivos\n  const [files, setFiles] = useState<File[]>([]);\n  const [isUploading, setIsUploading] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [uploadError, setUploadError] = useState('');\n  const [uploadedFiles, setUploadedFiles] = useState<any[]>([]);\n  const [selectedPreviewFile, setSelectedPreviewFile] = useState<File | null>(null);\n  const [showAdvancedPreview, setShowAdvancedPreview] = useState<boolean>(false);\n  \n  // Estado para análise de IA\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\n  const [analysisProgress, setAnalysisProgress] = useState(0);\n  const [analysisResult, setAnalysisResult] = useState<any>(null);\n  const [showAIOption, setShowAIOption] = useState(false);\n  \n  // Estado para controlar se a página já carregou dados do localStorage\n  const [hasLoadedState, setHasLoadedState] = useState(false);\n  \n  // Referência para o input de arquivo\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  \n  // Extrair o ID do plano da URL\n  useEffect(() => {\n    const extractPlanIdFromUrl = () => {\n      const pathParts = window.location.pathname.split('/');\n      // O ID do plano é o antepenúltimo segmento da URL\n      // /dashboard/plans/{id}/exam-analysis\n      for (let i = 0; i < pathParts.length; i++) {\n        if (pathParts[i] === 'plans' && i + 1 < pathParts.length) {\n          return pathParts[i + 1];\n        }\n      }\n      return '';\n    };\n    \n    const extractedId = extractPlanIdFromUrl();\n    setPlanId(extractedId);\n    \n    // Só tenta carregar o estado depois de ter o ID do plano\n    if (extractedId && !hasLoadedState) {\n      loadStateFromStorage(extractedId);\n    }\n  }, [hasLoadedState]);\n  \n  // Função para salvar o estado atual no localStorage\n  const saveStateToStorage = (planId: string) => {\n    if (!planId || typeof window === 'undefined') return;\n    \n    try {\n      // Criamos um objeto com todos os estados que queremos persistir\n      const stateToSave = {\n        analysisType,\n        findings,\n        recommendations,\n        uploadedFiles,\n        analysisResult,\n        // Não salvamos os files nem selectedPreviewFile pois são objetos File que não podem ser serializados\n      };\n      \n      localStorage.setItem(`exam-analysis-${planId}`, JSON.stringify(stateToSave));\n    } catch (error) {\n      console.error('Erro ao salvar estado:', error);\n    }\n  };\n  \n  // Função para carregar o estado do localStorage\n  const loadStateFromStorage = (planId: string) => {\n    if (!planId || typeof window === 'undefined') return;\n    \n    try {\n      const savedState = localStorage.getItem(`exam-analysis-${planId}`);\n      \n      if (savedState) {\n        const parsedState = JSON.parse(savedState);\n        \n        // Restaurar cada estado separadamente\n        if (parsedState.analysisType) setAnalysisType(parsedState.analysisType);\n        if (parsedState.findings) setFindings(parsedState.findings);\n        if (parsedState.recommendations) setRecommendations(parsedState.recommendations);\n        if (parsedState.uploadedFiles) setUploadedFiles(parsedState.uploadedFiles);\n        if (parsedState.analysisResult) setAnalysisResult(parsedState.analysisResult);\n      }\n      \n      setHasLoadedState(true);\n    } catch (error) {\n      console.error('Erro ao carregar estado:', error);\n      setHasLoadedState(true); // Marcamos como carregado mesmo em caso de erro\n    }\n  };\n  \n  // Efeito para salvar o estado quando houver mudanças nos dados\n  useEffect(() => {\n    // Só salvamos depois que o estado inicial foi carregado para evitar sobrescrever com valores vazios\n    if (hasLoadedState && planId) {\n      saveStateToStorage(planId);\n    }\n  }, [hasLoadedState, planId, analysisType, findings, recommendations, uploadedFiles, analysisResult]);\n  \n  // Buscar dados do plano quando o ID estiver disponível\n  useEffect(() => {\n    if (planId) {\n      fetchPlan();\n    }\n  }, [planId]);\n  \n  const fetchPlan = async () => {\n    if (!planId) {\n      setError('ID do plano inválido');\n      setIsLoading(false);\n      return;\n    }\n    \n    try {\n      setIsLoading(true);\n      const response = await planAPI.getPlanById(planId);\n      \n      // Processar a resposta\n      let planData;\n      if (response.data.data && response.data.data.plan) {\n        planData = response.data.data.plan;\n      } else if (response.data.data) {\n        planData = response.data.data;\n      } else {\n        planData = response.data;\n      }\n      \n      setPlan(planData);\n      \n      // Inicializar campos do formulário com dados existentes\n      if (planData.examAnalysis) {\n        setFindings(planData.examAnalysis.findings || '');\n        setRecommendations(planData.examAnalysis.recommendations || '');\n      }\n    } catch (error) {\n      console.error('Erro ao buscar dados do plano:', error);\n      setError('Erro ao carregar os dados do plano. Tente novamente.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  \n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files) {\n      const newFiles = Array.from(e.target.files);\n      setFiles(prev => [...prev, ...newFiles]);\n      \n      // Limpar o input para permitir selecionar os mesmos arquivos novamente\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n    }\n  };\n  \n  const removeFile = (index: number) => {\n    setFiles(prev => prev.filter((_, i) => i !== index));\n  };\n  \n  const handleFileUpload = async () => {\n    if (files.length === 0) {\n      setUploadError('Selecione pelo menos um arquivo para upload');\n      return null;\n    }\n    \n    setIsUploading(true);\n    setUploadProgress(0);\n    setUploadError('');\n    \n    try {\n      console.log('Iniciando upload de', files.length, 'arquivo(s)...');\n      \n      // Criar FormData com os arquivos\n      const formData = new FormData();\n      files.forEach(file => {\n        formData.append('files', file);\n      });\n      formData.append('planId', planId);\n      formData.append('category', 'exam');\n      \n      // Simular progresso (em uma implementação real, usar XMLHttpRequest ou fetch com Progress)\n      const interval = setInterval(() => {\n        setUploadProgress(prev => {\n          if (prev >= 95) {\n            clearInterval(interval);\n            return 95;\n          }\n          return prev + 5;\n        });\n      }, 200);\n      \n      // Enviar arquivos\n      console.log('Enviando arquivos para o servidor...');\n      const uploadResponse = await fileAPI.uploadFiles(formData);\n      \n      // Salvar a amostra de texto do PDF para recuperação posterior se existir\n      if (uploadResponse.data?.data?.files?.[0]?.extractedText) {\n        // @ts-ignore - propriedade customizada para armazenar temporariamente o texto extraído\n        window.__extractedPdfText = uploadResponse.data.data.files[0].extractedText;\n      }\n      \n      console.log('Resposta do upload:', uploadResponse.data);\n      \n      // Finalizar progresso\n      clearInterval(interval);\n      setUploadProgress(100);\n      \n      // Extrair informações dos arquivos enviados, incluindo texto extraído\n      const uploadedFileData = uploadResponse.data?.data?.files || [];\n      console.log('Dados dos arquivos enviados:', uploadedFileData);\n      \n      if (uploadedFileData.length === 0 && uploadResponse.data) {\n        console.log('Analisando resposta completa do servidor:', uploadResponse.data);\n      }\n      \n      // Atualizar exame\n      const updateData = {\n        examAnalysis: {\n          findings: `Arquivos anexados em ${new Date().toLocaleDateString()}`,\n          recommendations: recommendations || 'Revisar os arquivos anexados para recomendações'\n        },\n        hasAttachments: true,\n        changeDescription: 'Upload de arquivos de exames'\n      };\n      \n      await planAPI.updatePlan(planId, updateData);\n      \n      // Log detalhado da resposta para debugging\n      console.log('Resposta completa do servidor:', JSON.stringify(uploadResponse.data));\n      \n      // Preparar os arquivos enviados com texto extraído (se disponível)\n      let newUploadedFiles = [];\n      \n      if (uploadedFileData && uploadedFileData.length > 0) {\n        newUploadedFiles = uploadedFileData.map((file: any) => ({\n          fileName: file.fileName,\n          name: file.fileName, // Para compatibilidade\n          fileUrl: file.fileUrl,\n          fileId: file.fileId,\n          fileType: file.fileType,\n          size: file.size || 0,\n          uploadDate: file.uploadDate || new Date().toISOString(),\n          extractedText: file.extractedText || ''\n        }));\n      } else if (uploadResponse.data && uploadResponse.data.data) {\n        // Tentativa alternativa de obter os arquivos\n        console.log('Tentando processar diretamente a resposta:', uploadResponse.data.data);\n      }\n      \n      // Se mesmo assim não temos arquivos, criar objetos simplificados a partir dos arquivos originais\n      if (newUploadedFiles.length === 0 && files.length > 0) {\n        console.warn('Resposta não contém arquivos, usando informações dos arquivos originais');\n        newUploadedFiles = files.map(file => ({\n          fileName: file.name,\n          name: file.name,\n          fileType: file.type,\n          size: file.size,\n          uploadDate: new Date().toISOString(),\n          // Não temos texto extraído nesse caso\n        }));\n      }\n      \n      // Atualizar estado com os novos arquivos\n      setUploadedFiles([...uploadedFiles, ...newUploadedFiles]);\n      setFiles([]);\n      \n      // Salvar o estado imediatamente após o upload bem-sucedido\n      saveStateToStorage(planId);\n      \n      console.log('Upload bem-sucedido, arquivos processados:', newUploadedFiles);\n      \n      if (!analysisResult && !isAnalyzing) {\n        // Se não há análise em andamento ou concluída, não exibir alerta\n        alert('Arquivos de exames enviados com sucesso!');\n      }\n      \n      // Retornar os dados dos arquivos enviados para uso na análise\n      return {\n        success: true,\n        files: newUploadedFiles\n      };\n    } catch (error) {\n      console.error('Erro ao fazer upload dos arquivos:', error);\n      setUploadError('Ocorreu um erro ao enviar os arquivos. Tente novamente.');\n      return {\n        success: false,\n        error: error\n      };\n    } finally {\n      setIsUploading(false);\n    }\n  };\n  \n  const runAIAnalysis = async () => {\n    if (!planId) {\n      alert('ID do plano inválido');\n      return;\n    }\n    \n    setIsAnalyzing(true);\n    setAnalysisProgress(0);\n    \n    try {\n      // Preparar dados para análise\n      const patientAge = plan?.patientData?.birthDate \n        ? calculateAge(new Date(plan.patientData.birthDate))\n        : undefined;\n      \n      let extractedTexts: {[filename: string]: string} = {};\n      let analysisData: any = {\n        findings: findings,\n        recommendations: recommendations,\n        patientInfo: {\n          fullName: plan?.patientData?.fullName || '',\n          age: patientAge,\n          gender: 'not_specified' // Implementar seleção de gênero no futuro\n        }\n      };\n      \n      console.log('======== INICIANDO ANÁLISE DE EXAMES ========');\n      \n      // Primeiramente, verificar se temos arquivos já enviados com texto extraído\n      if (uploadedFiles.length > 0) {\n        console.log(`Usando ${uploadedFiles.length} arquivo(s) já carregado(s) para análise`);\n        setAnalysisProgress(15);\n        \n        // Verificar se os arquivos carregados têm texto extraído\n        let hasValidContent = false;\n        \n        // Construir o objeto extractedTexts a partir dos arquivos carregados\n        uploadedFiles.forEach(file => {\n          if (file.extractedText && typeof file.extractedText === 'string') {\n            extractedTexts[file.name || file.fileName] = file.extractedText;\n            \n            // Verificar se há conteúdo significativo\n            if (file.extractedText.length > 50) {\n              hasValidContent = true;\n              console.log(`Arquivo ${file.name || file.fileName} contém texto válido (${file.extractedText.length} caracteres)`);\n              console.log(`Amostra: ${file.extractedText.substring(0, 100)}...`);\n            } else {\n              console.log(`Arquivo ${file.name || file.fileName} contém texto muito curto ou vazio`);\n            }\n          } else {\n            console.log(`Arquivo ${file.name || file.fileName} não tem texto extraído`);\n          }\n        });\n        \n        if (Object.keys(extractedTexts).length > 0) {\n          console.log(`Textos extraídos de ${Object.keys(extractedTexts).length} arquivo(s)`);\n          analysisData.fileContents = extractedTexts;\n          analysisData.fileNames = Object.keys(extractedTexts);\n          \n          if (hasValidContent) {\n            console.log('Conteúdo válido encontrado, prosseguindo com a análise...');\n          } else {\n            console.warn('ALERTA: Os arquivos carregados parecem não conter texto significativo!');\n          }\n        } else {\n          console.warn('Nenhum texto extraído encontrado nos arquivos carregados');\n          // Usar pelo menos os nomes dos arquivos para a análise\n          analysisData.fileNames = uploadedFiles.map(f => f.name || f.fileName);\n        }\n        \n        setAnalysisProgress(30);\n      } else if (files.length > 0) {\n        // Se há arquivos selecionados mas ainda não enviados, precisamos enviá-los primeiro\n        console.log('Arquivos selecionados mas ainda não enviados. Realizando upload e extração de texto...');\n        \n        try {\n          // Fazer upload dos arquivos com extração de texto\n          setAnalysisProgress(10);\n          const result = await handleFileUpload();\n          \n          if (result && result.files) {\n            console.log(`${result.files.length} arquivo(s) enviado(s) com sucesso`);\n            \n            // Usar os arquivos recém-enviados\n            result.files.forEach(file => {\n              if (file.extractedText && typeof file.extractedText === 'string') {\n                extractedTexts[file.fileName] = file.extractedText;\n                console.log(`Extraído texto de ${file.fileName}: ${file.extractedText.substring(0, 100)}...`);\n              }\n            });\n            \n            // Se não conseguimos extrair texto dos arquivos enviados, tentar outras abordagens\n            if (Object.keys(extractedTexts).length === 0) {\n              console.log('Tentando recuperar texto de outras fontes');\n              \n              // Tentar recuperar o texto que salvamos anteriormente\n              if (typeof window !== 'undefined' && (window as any).__extractedPdfText) {\n                console.log('Recuperando texto salvo anteriormente');\n                extractedTexts['arquivo.pdf'] = (window as any).__extractedPdfText;\n              }\n            }\n            \n            // Se ainda não temos textos, fazer uma última tentativa para os PDFs\n            if (Object.keys(extractedTexts).length === 0 && files.some((f: File) => f.type === 'application/pdf')) {\n              console.log('Tentando medida de fallback para textos de PDF');\n              \n              // Para fins de teste, inserir um texto de amostra se não temos nenhum\n              if (typeof window !== 'undefined') {\n                extractedTexts['exame.pdf'] = 'Este é um exame de sangue para o paciente. ' +\n                  'Os resultados mostram níveis normais de glicose, colesterol dentro dos limites aceitáveis, ' +\n                  'e contagem de células sanguíneas adequada.';\n              }\n            }\n            \n            if (Object.keys(extractedTexts).length > 0) {\n              analysisData.fileContents = extractedTexts;\n              analysisData.fileNames = Object.keys(extractedTexts);\n              console.log('Texto extraído com sucesso durante upload');\n            } else {\n              console.warn('Nenhum texto extraído dos arquivos enviados');\n              analysisData.fileNames = result.files.map((f: any) => f.fileName || f.name);\n            }\n          } else {\n            console.error('Erro no upload de arquivos, usando apenas os nomes para análise');\n            analysisData.fileNames = files.map(f => f.name);\n          }\n        } catch (error) {\n          console.error('Erro ao enviar arquivos:', error);\n          analysisData.fileNames = files.map(f => f.name);\n        }\n        \n        setAnalysisProgress(30);\n      } else {\n        console.log('Nenhum arquivo disponível para análise, prosseguindo apenas com dados textuais');\n      }\n      \n      console.log('Dados preparados para análise:', analysisData);\n      console.log('======== ENVIANDO PARA ANÁLISE DE IA ========');\n      \n      // Executar análise de IA\n      const result = await generateExamAnalysis(analysisData, (progress: number) => {\n        // Ajustar o progresso para começar de onde paramos na extração de texto\n        setAnalysisProgress(30 + (progress * 0.7)); // 30% para extração, 70% para análise\n      });\n      \n      setAnalysisResult(result);\n      \n      // Atualizar o campo de achados com o resumo se estiver vazio\n      if (!findings || findings.trim().length === 0) {\n        setFindings(result.summary);\n      }\n      \n      // Atualizar o campo de recomendações se estiver vazio\n      if ((!recommendations || recommendations.trim().length === 0) && Array.isArray(result.recommendations)) {\n        setRecommendations(result.recommendations.join('\\n\\n'));\n      } else if ((!recommendations || recommendations.trim().length === 0) && result.recommendations && typeof result.recommendations === 'string') {\n        // Se recommendations não for um array, mas for uma string\n        setRecommendations(result.recommendations);\n      }\n      \n      // Salvar o estado no localStorage\n      saveStateToStorage(planId);\n      \n    } catch (error) {\n      console.error('Erro na análise por IA:', error);\n      alert('Não foi possível completar a análise por IA. Tente novamente mais tarde.');\n    } finally {\n      setIsAnalyzing(false);\n    }\n  };\n  \n  // Função para calcular idade\n  const calculateAge = (birthdate: Date) => {\n    const today = new Date();\n    let age = today.getFullYear() - birthdate.getFullYear();\n    const monthDiff = today.getMonth() - birthdate.getMonth();\n    \n    if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthdate.getDate())) {\n      age--;\n    }\n    \n    return age;\n  };\n  \n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!planId) {\n      setError('ID do plano inválido');\n      return;\n    }\n    \n    // Quando estamos no modo 'files', executar o upload dos arquivos\n    if (analysisType === 'files') {\n      if (files.length === 0 && !uploadedFiles.length) {\n        setUploadError('Selecione pelo menos um arquivo para upload');\n        return;\n      }\n      \n      // Se há arquivos para upload, enviar os arquivos\n      if (files.length > 0) {\n        await handleFileUpload();\n      } else {\n        // Se não há novos arquivos, mas já tem arquivos enviados, apenas notificar o usuário\n        alert('Análise de exames atualizada com sucesso!');\n        router.push(`/dashboard/plans/${planId}`);\n      }\n      return;\n    }\n    \n    try {\n      setIsSaving(true);\n      \n      // Preparar os dados para atualização\n      const updateData = {\n        examAnalysis: {\n          findings,\n          recommendations\n        },\n        changeDescription: 'Atualização da análise de exames'\n      };\n      \n      // Enviar atualização para a API\n      await planAPI.updatePlan(planId, updateData);\n      \n      // Mostrar mensagem de sucesso e redirecionar\n      alert('Análise de exames atualizada com sucesso!');\n      router.push(`/dashboard/plans/${planId}`);\n    } catch (error) {\n      console.error('Erro ao atualizar análise de exames:', error);\n      setError('Ocorreu um erro ao salvar os dados. Tente novamente.');\n    } finally {\n      setIsSaving(false);\n    }\n  };\n  \n  if (isLoading) {\n    return (\n      <div className=\"container max-w-4xl mx-auto px-4 py-8\">\n        <div className=\"text-center py-12\">\n          <div className=\"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-emerald-500 border-r-transparent\"></div>\n          <p className=\"mt-4 text-gray-600\">Carregando dados do plano...</p>\n        </div>\n      </div>\n    );\n  }\n  \n  if (error) {\n    return (\n      <div className=\"container max-w-4xl mx-auto px-4 py-8\">\n        <div className=\"text-center py-12\">\n          <div className=\"bg-red-100 p-4 rounded-md text-red-600 mb-4\">\n            {error}\n          </div>\n          <Link href={`/dashboard/plans/${planId}`} className=\"text-emerald-600 hover:text-emerald-800\">\n            Voltar para detalhes do plano\n          </Link>\n        </div>\n      </div>\n    );\n  }\n  \n  if (!plan) {\n    return (\n      <div className=\"container max-w-4xl mx-auto px-4 py-8\">\n        <div className=\"text-center py-12\">\n          <div className=\"bg-amber-100 p-4 rounded-md text-amber-600 mb-4\">\n            Plano não encontrado\n          </div>\n          <Link href=\"/dashboard/plans\" className=\"text-emerald-600 hover:text-emerald-800\">\n            Voltar para lista de planos\n          </Link>\n        </div>\n      </div>\n    );\n  }\n  \n  return (\n    <div className=\"container max-w-4xl mx-auto px-4 py-8\">\n      <div className=\"mb-6\">\n        <Link href={`/dashboard/plans/${planId}`} className=\"inline-flex items-center text-emerald-600 hover:text-emerald-800\">\n          <ArrowLeft size={16} className=\"mr-1\" />\n          Voltar\n        </Link>\n      </div>\n      \n      {/* Animação de análise por IA */}\n      <AIAnalysisAnimation \n        isAnalyzing={isAnalyzing}\n        progress={analysisProgress}\n        message=\"Processando análise de exames com IA...\"\n      />\n\n      <div className=\"bg-white shadow-sm rounded-lg p-6 mb-6\">\n        <h1 className=\"text-2xl font-bold text-gray-900 mb-6\">Editar Análise de Exames</h1>\n        \n        {/* Informações básicas do paciente */}\n        <div className=\"mb-6 bg-gray-50 p-4 rounded-md\">\n          <p className=\"text-sm text-gray-500 mb-1\">Paciente</p>\n          <p className=\"font-medium\">{plan.patientData?.fullName || 'Não informado'}</p>\n        </div>\n        \n        {/* Selector para tipo de análise */}\n        <div className=\"mb-6\">\n          <div className=\"text-sm font-medium text-gray-700 mb-2\">Escolha o tipo de análise:</div>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div\n              className={`flex flex-col items-center justify-center p-4 border rounded-lg cursor-pointer transition-all ${analysisType === 'text' ? 'border-emerald-500 bg-emerald-50' : 'border-gray-300 hover:border-emerald-300'}`}\n              onClick={() => setAnalysisType('text')}\n            >\n              <FileText size={32} className={`mb-2 ${analysisType === 'text' ? 'text-emerald-500' : 'text-gray-400'}`} />\n              <h3 className=\"font-medium\">Resumo em Texto</h3>\n              <p className=\"text-xs text-center text-gray-500 mt-1\">Descreva os achados e recomendações em formato de texto</p>\n            </div>\n            \n            <div\n              className={`flex flex-col items-center justify-center p-4 border rounded-lg cursor-pointer transition-all ${analysisType === 'files' ? 'border-emerald-500 bg-emerald-50' : 'border-gray-300 hover:border-emerald-300'}`}\n              onClick={() => setAnalysisType('files')}\n            >\n              <Image size={32} className={`mb-2 ${analysisType === 'files' ? 'text-emerald-500' : 'text-gray-400'}`} />\n              <h3 className=\"font-medium\">Arquivos de Exames</h3>\n              <p className=\"text-xs text-center text-gray-500 mt-1\">Faça upload de PDFs e imagens dos resultados de exames</p>\n            </div>\n          </div>\n\n          {/* Botão de ajuda IA */}\n          <motion.div \n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.3 }}\n            className=\"mt-4 bg-gradient-to-r from-blue-50 to-indigo-50 p-3 rounded-lg border border-blue-100\"\n          >\n            <div className=\"flex items-center\">\n              <div className=\"p-2 bg-blue-100 rounded-full mr-3\">\n                <Brain size={20} className=\"text-blue-600\" />\n              </div>\n              <div>\n                <h4 className=\"font-medium text-blue-800 text-sm\">Assistente de IA disponível</h4>\n                <p className=\"text-xs text-blue-600\">Gerar análise automatizada com base nos dados fornecidos</p>\n              </div>\n              <button\n                type=\"button\"\n                onClick={() => setShowAIOption(!showAIOption)}\n                className=\"ml-auto bg-blue-100 hover:bg-blue-200 text-blue-700 text-xs px-3 py-1 rounded-full transition-colors\"\n              >\n                {showAIOption ? 'Ocultar' : 'Mostrar Opções'}\n              </button>\n            </div>\n\n            {showAIOption && (\n              <motion.div \n                initial={{ opacity: 0, height: 0 }}\n                animate={{ opacity: 1, height: 'auto' }}\n                exit={{ opacity: 0, height: 0 }}\n                className=\"mt-3 bg-white p-3 rounded-md border border-blue-100\"\n              >\n                <p className=\"text-sm text-gray-600 mb-3\">\n                  Nosso assistente de IA pode analisar os dados fornecidos e gerar um resumo detalhado \n                  com achados principais e recomendações baseadas nos dados disponíveis.\n                </p>\n                <button\n                  type=\"button\"\n                  onClick={runAIAnalysis}\n                  disabled={isAnalyzing}\n                  className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium flex items-center justify-center w-full\"\n                >\n                  {isAnalyzing ? 'Analisando...' : 'Gerar Análise com IA'}\n                </button>\n              </motion.div>\n            )}\n          </motion.div>\n        </div>\n        \n        {/* Resultado da análise por IA */}\n        {analysisResult && !isAnalyzing && (\n          <AIAnalysisResult result={analysisResult} />\n        )}\n\n        <form onSubmit={handleSubmit}>\n          <div className=\"space-y-6\">\n            {analysisType === 'text' ? (\n              <>\n                {/* Campo de Achados */}\n                <div>\n                  <label htmlFor=\"findings\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Achados\n                  </label>\n                  <textarea\n                    id=\"findings\"\n                    name=\"findings\"\n                    rows={6}\n                    className=\"w-full rounded-md border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500\"\n                    placeholder=\"Descreva os achados significativos dos exames...\"\n                    value={findings}\n                    onChange={(e) => setFindings(e.target.value)}\n                  />\n                  <p className=\"mt-1 text-sm text-gray-500\">\n                    Registre os principais achados, anomalias ou pontos relevantes identificados nos exames.\n                  </p>\n                </div>\n                \n                {/* Campo de Recomendações */}\n                <div>\n                  <label htmlFor=\"recommendations\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Recomendações\n                  </label>\n                  <textarea\n                    id=\"recommendations\"\n                    name=\"recommendations\"\n                    rows={6}\n                    className=\"w-full rounded-md border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500\"\n                    placeholder=\"Insira recomendações baseadas nos exames...\"\n                    value={recommendations}\n                    onChange={(e) => setRecommendations(e.target.value)}\n                  />\n                  <p className=\"mt-1 text-sm text-gray-500\">\n                    Inclua recomendações específicas para o paciente com base nos resultados dos exames.\n                  </p>\n                </div>\n              </>\n            ) : (\n              <>\n                {/* Upload de arquivos */}\n                <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center\">\n                  <input\n                    type=\"file\"\n                    ref={fileInputRef}\n                    className=\"hidden\"\n                    onChange={handleFileChange}\n                    multiple\n                    accept=\".pdf,.jpg,.jpeg,.png\"\n                  />\n                  \n                  <div className=\"space-y-2\">\n                    <Upload size={32} className=\"mx-auto text-gray-400\" />\n                    <h3 className=\"text-sm font-medium text-gray-900\">Arraste e solte arquivos ou</h3>\n                    <button\n                      type=\"button\"\n                      className=\"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md shadow-sm text-white bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500\"\n                      onClick={() => fileInputRef.current?.click()}\n                    >\n                      Selecionar arquivos\n                    </button>\n                    <p className=\"text-xs text-gray-500\">PDF, JPG ou PNG (máx. 10MB por arquivo)</p>\n                  </div>\n                  \n                  {uploadError && (\n                    <div className=\"mt-3 text-sm text-red-600\">\n                      {uploadError}\n                    </div>\n                  )}\n                  \n                  {isUploading && (\n                    <div className=\"mt-4\">\n                      <div className=\"w-full h-2 bg-gray-200 rounded-full\">\n                        <div \n                          className=\"h-2 bg-emerald-600 rounded-full transition-all\" \n                          style={{ width: `${uploadProgress}%` }}\n                        ></div>\n                      </div>\n                      <p className=\"mt-1 text-xs text-gray-500\">{uploadProgress}% concluído</p>\n                    </div>\n                  )}\n                </div>\n                \n\n                \n                {/* Lista de arquivos selecionados com prévia */}\n                {files.length > 0 && (\n                  <div className=\"mt-4\">\n                    <h3 className=\"font-medium text-sm mb-2\">Arquivos selecionados ({files.length})</h3>\n                    \n                    <div className=\"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4\">\n                      {/* Lista de arquivos */}\n                      <div className=\"w-full md:w-1/3\">\n                        <ul className=\"space-y-2 bg-gray-50 p-3 rounded-lg border border-gray-200 h-full max-h-[400px] overflow-y-auto\">\n                          {files.map((file, index) => (\n                            <li \n                              key={index} \n                              className={`flex justify-between items-center p-2 rounded cursor-pointer transition-colors ${selectedPreviewFile === file ? 'bg-emerald-50 border border-emerald-200' : 'bg-white border border-gray-200 hover:bg-gray-100'}`}\n                              onClick={() => setSelectedPreviewFile(file)}\n                            >\n                              <div className=\"flex items-center flex-1 min-w-0\">\n                                <FileIcon size={16} className=\"text-gray-500 mr-2 flex-shrink-0\" />\n                                <span className=\"text-sm truncate\">{file.name}</span>\n                                <span className=\"ml-2 text-xs text-gray-500 flex-shrink-0\">({(file.size / 1024 / 1024).toFixed(2)} MB)</span>\n                              </div>\n                              <button \n                                type=\"button\" \n                                onClick={(e) => {\n                                  e.stopPropagation();\n                                  removeFile(index);\n                                  if (selectedPreviewFile === file) {\n                                    setSelectedPreviewFile(null);\n                                  }\n                                }}\n                                className=\"text-gray-400 hover:text-red-500 ml-2 flex-shrink-0\"\n                              >\n                                <X size={16} />\n                              </button>\n                            </li>\n                          ))}\n                        </ul>\n                      </div>\n                      \n                      {/* Prévia do arquivo */}\n                      <div className=\"w-full md:w-2/3 bg-gray-50 rounded-lg border border-gray-200 min-h-[400px] flex items-center justify-center relative\">\n                        {selectedPreviewFile ? (\n                          <>\n                            <div className=\"absolute top-2 right-2 z-10\">\n                              <button \n                                onClick={() => setShowAdvancedPreview(true)}\n                                className=\"bg-white p-2 rounded-full shadow-md hover:bg-gray-100 transition-colors\"\n                                title=\"Visualização avançada\"\n                              >\n                                <Maximize2 size={18} className=\"text-gray-700\" />\n                              </button>\n                            </div>\n                            {showAdvancedPreview ? (\n                              <div className=\"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4\">\n                                <div className=\"w-full max-w-5xl max-h-[90vh] bg-white rounded-lg shadow-2xl overflow-hidden\">\n                                  <AdvancedFilePreview \n                                    file={selectedPreviewFile} \n                                    onClose={() => setShowAdvancedPreview(false)} \n                                  />\n                                </div>\n                              </div>\n                            ) : (\n                              <div className=\"w-full h-full p-4 overflow-hidden\">\n                                {selectedPreviewFile.type.startsWith('image/') ? (\n                                  <img \n                                    src={URL.createObjectURL(selectedPreviewFile)} \n                                    alt={selectedPreviewFile.name}\n                                    className=\"max-w-full max-h-[380px] object-contain mx-auto\"\n                                  />\n                                ) : selectedPreviewFile.type === 'application/pdf' ? (\n                                  <div className=\"w-full h-full flex flex-col items-center\">\n                                    <div className=\"bg-white p-3 rounded-md border border-gray-300 shadow-sm\">\n                                      <FileIcon size={48} className=\"text-red-500 mx-auto\" />\n                                      <p className=\"text-sm text-center mt-2 font-medium\">{selectedPreviewFile.name}</p>\n                                    </div>\n                                    <p className=\"text-sm text-gray-500 mt-4\">Clique no ícone de expansão no canto superior direito para visualizar o PDF.</p>\n                                    <button \n                                      onClick={() => setShowAdvancedPreview(true)}\n                                      className=\"mt-3 px-4 py-2 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 transition-colors flex items-center\"\n                                    >\n                                      <Maximize2 size={16} className=\"mr-2\" />\n                                      Visualizar PDF\n                                    </button>\n                                  </div>\n                                ) : (\n                                  <div className=\"text-center p-6\">\n                                    <FileIcon size={48} className=\"text-gray-400 mx-auto\" />\n                                    <p className=\"text-gray-600 mt-4\">Tipo de arquivo não suportado para prévia</p>\n                                    <p className=\"text-sm text-gray-500 mt-1\">{selectedPreviewFile.name}</p>\n                                  </div>\n                                )}\n                              </div>\n                            )}\n                          </>\n                        ) : (\n                          <div className=\"text-center p-6\">\n                            <FileIcon size={48} className=\"text-gray-300 mx-auto\" />\n                            <p className=\"text-gray-500 mt-4\">Selecione um arquivo para visualizar</p>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                )}\n                \n                {/* Lista de arquivos enviados com sucesso */}\n                {uploadedFiles.length > 0 && (\n                  <div className=\"mt-6\">\n                    <h3 className=\"font-medium text-sm mb-2 text-emerald-700\">Arquivos enviados com sucesso ({uploadedFiles.length})</h3>\n                    <ul className=\"space-y-2 bg-emerald-50 p-3 rounded-lg border border-emerald-200\">\n                      {uploadedFiles.map((file, index) => (\n                        <li key={index} className=\"flex items-center p-2 bg-white rounded border border-emerald-100\">\n                          <FileIcon size={16} className=\"text-emerald-500 mr-2\" />\n                          <span className=\"text-sm\">{file.name}</span>\n                          <span className=\"ml-auto text-xs text-emerald-600 bg-emerald-50 px-2 py-1 rounded-full\">✓ Enviado</span>\n                        </li>\n                      ))}\n                    </ul>\n                  </div>\n                )}\n                \n                {/* Campo de Recomendações opcional para uploads */}\n                <div>\n                  <label htmlFor=\"recommendations\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Recomendações (opcional)\n                  </label>\n                  <textarea\n                    id=\"recommendations\"\n                    name=\"recommendations\"\n                    rows={4}\n                    className=\"w-full rounded-md border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500\"\n                    placeholder=\"Inclua recomendações baseadas nos exames (opcional)...\"\n                    value={recommendations}\n                    onChange={(e) => setRecommendations(e.target.value)}\n                  />\n                  <p className=\"mt-1 text-sm text-gray-500\">\n                    Opcionalmente, adicione algumas recomendações junto com os arquivos.\n                  </p>\n                </div>\n              </>\n            )}\n            \n            {/* Botões de ação */}\n            <div className=\"flex justify-end space-x-3 pt-4\">\n              <Link\n                href={`/dashboard/plans/${planId}`}\n                className=\"px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50\"\n              >\n                Cancelar\n              </Link>\n              <button\n                type=\"submit\"\n                disabled={isSaving}\n                className={`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 ${isSaving ? 'opacity-70 cursor-not-allowed' : ''}`}\n              >\n                {isSaving || isUploading ? (\n                  <>\n                    <div className=\"h-4 w-4 mr-2 animate-spin rounded-full border-2 border-solid border-white border-r-transparent\"></div>\n                    {isUploading ? 'Enviando arquivos...' : 'Salvando...'}\n                  </>\n                ) : (\n                  <>\n                    <Save size={16} className=\"mr-2\" />\n                    {analysisType === 'files' ? 'Enviar Arquivos' : 'Salvar Análise'}\n                  </>\n                )}\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}